<!DOCTYPE html>
<html lang="zh">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Qing's Web</title>
    <script src="http://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../css/draggrid-1.0.1.css" />
    <script src="../js/lodash.js"></script>
    <script src="../js/draggrid-1.0.1.js"></script>

    <script src="http://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">

</head>

<style>
    #container {
        background: url(../icon/bg.jpg);
        -moz-background-size: cover;
        background-size: cover;
    }

    .topbaner img:first {
        padding-left: 400px;

    }

    .topbaner img {
        height: 40px;
        padding-right: 20px;
        padding-top: 12px;

    }
</style>

<body style="margin: 0px; ">
    <div style="height: 65px; background-color: #1d1d23; width: 100%; position: absolute;" class="topbaner">
        <div style="float: left;">
            <img class="graph" src="../icon/%E5%9B%BE%E7%89%87.png" />
            <img class="graph" src="../icon/%E6%96%87%E6%9C%AC.png" />
            <img class="graph" src="../icon/%E6%A0%87%E9%A2%98.png" />
        </div>
        <div style="float: right;">
            <img src="../icon/%E4%BF%9D%E5%AD%98.png" name="btnSave" />
        </div>

    </div>
    <div id="container" class="draggrid div-wrap" style="width: 80%; height: 70%; top:65px; text-align: center; float: left; position: absolute;"></div>
    <div id="container2" style="background-color: #1d1d23; width: 20%; height: 70%; top:65px; position: absolute;float: right; right: 0px;"></div>

</body>

<script>
    $(function() {

        $("[name=btnSave]").click(function() {
            window.localStorage.setItem("draggrid.1.0.1", JSON.stringify(window.c.getAllPanelData()));

        });


        var data = [{
                "id": "1001",
                "pId": "-1",
                "x": 2.77778,
                "y": 8.33333,
                "width": 94.4444,
                "height": 88.8889,
                "loadMode": "div",
                "url": ""
            },
            {
                "id": "000000",
                "pId": "1001",
                "x": 1.38889,
                "y": 1.38889,
                "width": 37.5,
                "height": 25,
                "loadMode": "div",
                "url": "http://localhost:8084/datav/panel/_viewPanel.do?panelId=744c817b-c6b1-11e7-82c3-00e081df9f6b"
            },
            {
                "id": "100000",
                "pId": "1001",
                "x": 41.6667,
                "y": 48.6111,
                "width": 56.9444,
                "height": 50,
                "loadMode": "div",
                "url": "http://localhost:8084/datav/panel/_viewPanel.do?panelId=dc449c1e-c6b9-11e7-82c3-00e081df9f6b"
            },
            {
                "id": "200000",
                "pId": "1001",
                "x": 1.38889,
                "y": 27.7778,
                "width": 37.5,
                "height": 36.1111,
                "loadMode": "div",
                "url": "http://localhost:8084/datav/panel/_viewPanel.do?panelId=e509df9c-c6b2-11e7-82c3-00e081df9f6b"
            },
            {
                "id": "300000",
                "pId": "1001",
                "x": 1.38889,
                "y": 65.2778,
                "width": 37.5,
                "height": 33.3333,
                "loadMode": "div",
                "url": "http://localhost:8084/datav/panel/_viewPanel.do?panelId=d8cb3906-c6b5-11e7-82c3-00e081df9f6b"
            },
            {
                "id": "400000",
                "pId": "1001",
                "x": 47.2222,
                "y": 2.77778,
                "width": 23.6111,
                "height": 38.8889,
                "loadMode": "div",
                "url": "http://localhost:8084/datav/panel/_viewPanel.do?panelId=e183d2ef-c457-11e7-82c3-00e081df9f6b"
            }
        ];

        if (!_.isNull(window.localStorage.getItem("draggrid.1.0.1"))) {
            //            console.log(window.localStorage.getItem("draggrid.1.0.1"))
            data = JSON.parse(window.localStorage.getItem("draggrid.1.0.1"));

        }


        window.c = $("#container").draggrid({
            gridNumber: 72,
            on: {
                onEdit: function(divObj) {
                    console.log(divObj)
                }

            }
        });

        c.addGrid(data);

        //        c.getAllPanelData();


    });
</script>


<script>
</script>

</html>
